(this.webpackJsonpflexiple=this.webpackJsonpflexiple||[]).push([[0],{109:function(e,t,n){e.exports=n(134)},116:function(e,t,n){},131:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(43),o=n.n(a),c={ajax:function(e,t,n,a){var o={headers:{Accept:"application/json","Content-Type":"application/json"}};t&&(o.body=JSON.stringify(t),o.method="POST"),fetch(e,o).then((function(e){return e.json()})).then((function(e){n&&n(e)})).catch((function(e){a&&a(e)}))}},i={},m=n(0),r=n.n(m),s=n(31),l=n.n(s),d=n(48),u=(n(116),n(76)),p=n(67),h=n(85),C={en:{translation:n(86)},de:{translation:n(87)},fr:{translation:n(88)},zh:{translation:n(89)},pt:{translation:n(90)}};u.a.use(h.a).use(p.b).init({resources:C,lng:"en",fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var E=u.a,f=n(39),v=n(40),O=n(16),b=n(52),y=n(51),j=n(15),M=n(10),T=n(170),N=n(96),g=n.n(N),k=n(97),w=n.n(k),x=n(91),_=n.n(x),D=n(169),S=n(174),U=n(172),R=n(173),L=n(168),B=(n(131),function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={commentTxt:"",initialEditComment:"",commentEditMode:!1,showDeleteConfirmation:!1},a.commentRef=r.a.createRef(),a.onCommentChange=a.onCommentChange.bind(Object(O.a)(a)),a.addComment=a.addComment.bind(Object(O.a)(a)),a.openEditMode=a.openEditMode.bind(Object(O.a)(a)),a.updateComment=a.updateComment.bind(Object(O.a)(a)),a.cancelUpdate=a.cancelUpdate.bind(Object(O.a)(a)),a.replyComment=a.replyComment.bind(Object(O.a)(a)),a.cancelReply=a.cancelReply.bind(Object(O.a)(a)),a.showDeleteBox=a.showDeleteBox.bind(Object(O.a)(a)),a.closeDeleteBox=a.closeDeleteBox.bind(Object(O.a)(a)),a.deleteComment=a.deleteComment.bind(Object(O.a)(a)),a}return Object(v.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.user,a=t.comment,o=t.editMode,c=t.upvoteComment,i=t.replyOnComment,m=this.state,s=m.commentTxt,l=m.commentEditMode,d=m.initialEditComment,u=m.showDeleteConfirmation,p=o||l,h={placeholder:"Enter comment to post...",onInput:this.onCommentChange,ref:this.commentRef,contentEditable:"true"};return l&&(h.dangerouslySetInnerHTML={__html:d}),r.a.createElement("div",{className:"comment-box ".concat(i?"comment-box-reply":"")},r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment-user"},r.a.createElement("img",{src:n.profilePhoto,alt:n.name,className:"user-img"})),r.a.createElement("div",{className:"comment-cnt"},r.a.createElement("div",{className:"comment-hdr"},r.a.createElement("span",{className:"user-name bold"},n.name),a.id&&r.a.createElement(_.a,{onClick:this.showDeleteBox})),r.a.createElement("div",{className:"comment-body ".concat(o?"":"comment-body-read")},p&&r.a.createElement("div",Object.assign({className:"comment-input"},h)),!p&&r.a.createElement("div",{className:"comment-txt",dangerouslySetInnerHTML:{__html:a.text},onClick:this.openEditMode})))),r.a.createElement("div",{className:"comment-action ".concat(p?"comment-action-edit":"")},i&&r.a.createElement(T.a,{onClick:this.cancelReply},"Cancel"),!a.id&&r.a.createElement(T.a,{variant:"contained",disabled:!s||!s.trim(),onClick:this.addComment},"Post"),a.id&&r.a.createElement("div",{className:"comment-action-list"},r.a.createElement("div",{className:"comment-act-upvote"},r.a.createElement(g.a,{onClick:c.bind(this,a)}),r.a.createElement("span",{className:"upvote-count"},null!==(e=a.upvote)&&void 0!==e?e:0),r.a.createElement(T.a,{onClick:this.replyComment,className:"reply-bnt",startIcon:r.a.createElement(w.a,null)},"Reply")),l&&r.a.createElement("div",{className:"comment-act-buttons"},r.a.createElement(T.a,{onClick:this.cancelUpdate},"Cancel"),r.a.createElement(T.a,{variant:"contained",disabled:d===s,onClick:this.updateComment},"Update")))),r.a.createElement(D.a,{open:u,onClose:this.closeDeleteBox},r.a.createElement(L.a,null,"Are your sure about deleting post?"),r.a.createElement(U.a,null,r.a.createElement(R.a,null,"Deleting a post will remove it permanently along with any replies added on it.")),r.a.createElement(S.a,null,r.a.createElement(T.a,{onClick:this.closeDeleteBox},"CANCEL"),r.a.createElement(T.a,{onClick:this.deleteComment,variant:"contained"},"DELETE"))))}},{key:"showDeleteBox",value:function(){this.setState({showDeleteConfirmation:!0})}},{key:"closeDeleteBox",value:function(){this.setState({showDeleteConfirmation:!1})}},{key:"deleteComment",value:function(){this.props.deleteComment(this.props.comment)}},{key:"onCommentChange",value:function(e){this.setState({commentTxt:e.currentTarget.innerHTML})}},{key:"addComment",value:function(){var e,t=this.props,n=t.replyOnComment,a=t.postComment,o=t.user;n?this.props.updateComment(Object(M.a)(Object(M.a)({},n),{},{comment:n.text,createdBy:this.props.user,showReplyBox:!1,children:[{id:crypto.randomUUID(),comment:this.state.commentTxt.trim(),createdBy:o}].concat(Object(j.a)(null!==(e=n.children)&&void 0!==e?e:[]))})):(this.commentRef.current.innerHTML="",a(this.state.commentTxt.trim(),o))}},{key:"openEditMode",value:function(){this.setState({commentEditMode:!0,initialEditComment:this.props.comment.text,commentTxt:this.props.comment.text})}},{key:"updateComment",value:function(){this.props.updateComment(Object(M.a)(Object(M.a)({},this.props.comment),{},{comment:this.state.commentTxt,createdBy:this.props.user})),this.cancelUpdate()}},{key:"cancelUpdate",value:function(){this.setState({commentEditMode:!1,initialEditComment:"",commentTxt:""})}},{key:"replyComment",value:function(){this.props.updateComment(Object(M.a)(Object(M.a)({},this.props.comment),{},{comment:this.props.comment.text,createdBy:this.props.user,showReplyBox:!0}))}},{key:"cancelReply",value:function(){this.props.updateComment(Object(M.a)(Object(M.a)({},this.props.replyOnComment),{},{comment:this.props.replyOnComment.text,createdBy:this.props.user,showReplyBox:!1}))}}]),n}(r.a.Component));B.defaultProps={comment:{}};var A=B,I=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={},a.postComment=a.postComment.bind(Object(O.a)(a)),a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.loadComments()}},{key:"render",value:function(){var e=this.props.comments;return!!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comments-list"},this.getCreateCommentJSX(),this.getCommentsJSX(e)))}},{key:"getCreateCommentJSX",value:function(e){var t=this.props.updateComment;return r.a.createElement(A,{user:o.a.getAppData("loggedInUser"),editMode:!0,postComment:this.postComment,replyOnComment:e,updateComment:t})}},{key:"getCommentsJSX",value:function(e){var t=this,n=this.props,a=n.upvoteComment,o=n.updateComment,c=n.deleteComment;return r.a.createElement("div",{className:"comment-list-item"},e.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(A,{user:e.createdBy,comment:{id:e.id,text:e.comment,upvote:e.upvote,children:e.children},upvoteComment:a,updateComment:o,deleteComment:c}),e.showReplyBox&&t.getCreateCommentJSX(e),e.children&&t.getCommentsJSX(e.children))})))}},{key:"postComment",value:function(e,t){this.props.createComment({id:crypto.randomUUID(),comment:e,createdBy:t})}}]),n}(r.a.Component),P={INIT_COMMENTS:"INIT_COMMENTS",CREATE_COMMENT:"CREATE_COMMENT",UPVOTE_COMMENT:"UPVOTE_COMMENT",UPDATE_COMMENT:"UPDATE_COMMENT",DELETE_COMMENT:"DELETE_COMMENT"},J=function(){return function(e){c.ajax(i.GET_COMMENTS,void 0,(function(t){e({type:P.INIT_COMMENTS,payload:{data:t}})}))}},z=Object(d.b)((function(e){return{comments:e.comments.comments}}),(function(e){return{loadComments:function(){e(J())},createComment:function(t){e(function(e){return{type:P.CREATE_COMMENT,comment:e}}(t))},upvoteComment:function(t){e(function(e){return{type:P.UPVOTE_COMMENT,comment:e}}(t))},updateComment:function(t){e(function(e){return{type:P.UPDATE_COMMENT,comment:e}}(t))},deleteComment:function(t){e(function(e){return{type:P.DELETE_COMMENT,comment:e}}(t))}}}))(I),X=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a,o;return Object(f.a)(this,n),(a=t.call(this,e)).state={},a.source=a.props.source,a._handleKeyDown=a._handleKeyDown.bind(Object(O.a)(a)),a._handleClickEvents=a._handleClickEvents.bind(Object(O.a)(a)),a._handleWindowResize=a._handleWindowResize.bind(Object(O.a)(a)),document.addEventListener("keydown",a._handleKeyDown),document.addEventListener("click",a._handleClickEvents),window.addEventListener("resize",a._handleWindowResize),o=navigator.language||navigator.userLanguage,E.changeLanguage(o),a}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.initAppComp()}},{key:"render",value:function(){return r.a.createElement("div",{id:"flexiple-comments"},r.a.createElement(z,null))}},{key:"_handleKeyDown",value:function(e){e.keyCode}},{key:"_handleClickEvents",value:function(){}},{key:"_handleWindowResize",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("click",this._handleClickEvents),window.removeEventListener("resize",this._handleWindowResize)}}]),n}(r.a.Component),V="INIT_APP",W=Object(d.b)((function(e,t){return{appData:e.appData.appData}}),(function(e){return{initAppComp:function(){e({type:V})}}}))(X),K=n(58),H=n(98),F={},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(M.a)(Object(M.a)({},e),{},{appData:{showMask:!1}});default:return e}},q={},Q=function e(t,n){var a=Object(j.a)(t);for(var o in a){var c=a[o];if(c.id===n.id){var i;a[o]=Object(M.a)(Object(M.a)({},c),{},{upvote:(null!==(i=c.upvote)&&void 0!==i?i:0)+1});break}c.children&&(a[o]=Object(M.a)(Object(M.a)({},c),{},{children:e(c.children,n)}))}return a},Y=function e(t,n){var a=Object(j.a)(t);for(var o in a){var c=a[o];if(c.id===n.id){a[o]=n;break}c.children&&(a[o]=Object(M.a)(Object(M.a)({},c),{},{children:e(c.children,n)}))}return a},Z=function e(t,n){var a=Object(j.a)(t);for(var o in a){var c=a[o];if(c.id===n.id){a=a.filter((function(e){return e.id!==n.id}));break}c.children&&(a[o]=Object(M.a)(Object(M.a)({},c),{},{children:e(c.children,n)}))}return a},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P.INIT_COMMENTS:return Object(M.a)(Object(M.a)({},e),{},{comments:t.payload.data});case P.CREATE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:[t.comment].concat(Object(j.a)(e.comments))});case P.UPVOTE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:Q(e.comments,t.comment)});case P.UPDATE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:Y(e.comments,t.comment)});case P.DELETE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:Z(e.comments,t.comment)});default:return e}},ee=Object(K.b)({appData:G,comments:$}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||K.c,ne=Object(K.d)(ee,te(Object(K.a)(H.a)));!function(e){e}(ne),o.a.setParamMap(),c.ajax("/data/AppConfig.json",void 0,(function(e){o.a.initConfig(e),function(e){if(e)for(var t in e)i[t]=e[t]}(e.URLs),l.a.render(r.a.createElement(d.a,{store:ne},r.a.createElement(W,null)),document.getElementById("root"))}))},43:function(e,t,n){e.exports&&(e.exports=function(){var e,t={};return{getLoggedInUser:function(){return e&&e.userData},getParamData:function(e){return t[e]},setParamData:function(e){t=e},initConfig:function(t){e=t},getAppData:function(t){return e?e[t]:void 0},setAppData:function(t,n){e&&(e[t]=n)},getUserAction:function(t){return e&&e.actions?e.actions[t]:void 0},setUserAction:function(t,n){e.actions[t]=n},setParamMap:function(e){var n;e?t=e:""!==(n=-1!==window.location.href.indexOf("?")?window.location.href.slice(window.location.href.indexOf("?")+1,window.location.href.length):window.location.href.slice(window.location.href.indexOf("&")+1,window.location.href.length))&&n.split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]}))}}}())},86:function(e){e.exports=JSON.parse("{}")},87:function(e){e.exports=JSON.parse("{}")},88:function(e){e.exports=JSON.parse("{}")},89:function(e){e.exports=JSON.parse("{}")},90:function(e){e.exports=JSON.parse("{}")}},[[109,1,2]]]);
//# sourceMappingURL=main.4259266c.chunk.js.map