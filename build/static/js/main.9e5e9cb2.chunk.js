(this.webpackJsonpflexiple=this.webpackJsonpflexiple||[]).push([[0],{102:function(e,t,n){},117:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(36),o=n.n(a),c={ajax:function(e,t,n,a){var o={headers:{Accept:"application/json","Content-Type":"application/json"}};t&&(o.body=JSON.stringify(t),o.method="POST"),fetch(e,o).then((function(e){return e.json()})).then((function(e){n&&n(e)})).catch((function(e){a&&a(e)}))}},i={},m=n(0),r=n.n(m),s=n(53),l=n.n(s),d=n(42),u=(n(102),n(69)),p=n(61),h=n(80),f={en:{translation:n(81)},de:{translation:n(82)},fr:{translation:n(83)},zh:{translation:n(84)},pt:{translation:n(85)}};u.a.use(h.a).use(p.b).init({resources:f,lng:"en",fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var C=u.a,v=n(40),E=n(41),O=n(14),b=n(44),y=n(43),j=n(13),M=n(6),T=n(138),g=n(89),N=n.n(g),k=n(90),_=n.n(k),w=(n(117),function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).state={commentTxt:"",initialEditComment:"",commentEditMode:!1},a.commentRef=r.a.createRef(),a.onCommentChange=a.onCommentChange.bind(Object(O.a)(a)),a.addComment=a.addComment.bind(Object(O.a)(a)),a.openEditMode=a.openEditMode.bind(Object(O.a)(a)),a.updateComment=a.updateComment.bind(Object(O.a)(a)),a.cancelUpdate=a.cancelUpdate.bind(Object(O.a)(a)),a.replyComment=a.replyComment.bind(Object(O.a)(a)),a.cancelReply=a.cancelReply.bind(Object(O.a)(a)),a}return Object(E.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.user,a=t.comment,o=t.editMode,c=t.upvoteComment,i=t.replyOnComment,m=this.state,s=m.commentTxt,l=m.commentEditMode,d=m.initialEditComment,u=o||l,p={placeholder:"Enter comment to post...",onInput:this.onCommentChange,ref:this.commentRef,contentEditable:"true"};return l&&(p.dangerouslySetInnerHTML={__html:d}),r.a.createElement("div",{className:"comment-box ".concat(i?"comment-box-reply":"")},r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment-user"},r.a.createElement("img",{src:n.profilePhoto,alt:n.name,className:"user-img"})),r.a.createElement("div",{className:"comment-cnt"},r.a.createElement("div",{className:"comment-hdr"},r.a.createElement("span",{className:"user-name bold"},n.name)),r.a.createElement("div",{className:"comment-body ".concat(o?"":"comment-body-read")},u&&r.a.createElement("div",Object.assign({className:"comment-input"},p)),!u&&r.a.createElement("div",{className:"comment-txt",dangerouslySetInnerHTML:{__html:a.text},onClick:this.openEditMode})))),r.a.createElement("div",{className:"comment-action ".concat(u?"comment-action-edit":"")},i&&r.a.createElement(T.a,{onClick:this.cancelReply},"Cancel"),!a.id&&r.a.createElement(T.a,{variant:"contained",disabled:!s||!s.trim(),onClick:this.addComment},"Post"),a.id&&r.a.createElement("div",{className:"comment-action-list"},r.a.createElement("div",{className:"comment-act-upvote"},r.a.createElement(N.a,{onClick:c.bind(this,a)}),r.a.createElement("span",{className:"upvote-count"},null!==(e=a.upvote)&&void 0!==e?e:0),r.a.createElement(T.a,{onClick:this.replyComment,className:"reply-bnt",startIcon:r.a.createElement(_.a,null)},"Reply")),l&&r.a.createElement("div",{className:"comment-act-buttons"},r.a.createElement(T.a,{onClick:this.cancelUpdate},"Cancel"),r.a.createElement(T.a,{variant:"contained",disabled:d===s,onClick:this.updateComment},"Update")))))}},{key:"onCommentChange",value:function(e){this.setState({commentTxt:e.currentTarget.innerHTML})}},{key:"addComment",value:function(){var e,t=this.props,n=t.replyOnComment,a=t.postComment,o=t.user;n?this.props.updateComment(Object(M.a)(Object(M.a)({},n),{},{comment:n.text,createdBy:this.props.user,showReplyBox:!1,children:[{id:crypto.randomUUID(),comment:this.state.commentTxt.trim(),createdBy:o}].concat(Object(j.a)(null!==(e=n.children)&&void 0!==e?e:[]))})):(this.commentRef.current.innerHTML="",a(this.state.commentTxt.trim(),o))}},{key:"openEditMode",value:function(){this.setState({commentEditMode:!0,initialEditComment:this.props.comment.text,commentTxt:this.props.comment.text})}},{key:"updateComment",value:function(){this.props.updateComment(Object(M.a)(Object(M.a)({},this.props.comment),{},{comment:this.state.commentTxt,createdBy:this.props.user})),this.cancelUpdate()}},{key:"cancelUpdate",value:function(){this.setState({commentEditMode:!1,initialEditComment:"",commentTxt:""})}},{key:"replyComment",value:function(){this.props.updateComment(Object(M.a)(Object(M.a)({},this.props.comment),{},{comment:this.props.comment.text,createdBy:this.props.user,showReplyBox:!0}))}},{key:"cancelReply",value:function(){this.props.updateComment(Object(M.a)(Object(M.a)({},this.props.replyOnComment),{},{comment:this.props.replyOnComment.text,createdBy:this.props.user,showReplyBox:!1}))}}]),n}(r.a.Component));w.defaultProps={comment:{}};var x=w,S=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).state={},a.postComment=a.postComment.bind(Object(O.a)(a)),a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.loadComments()}},{key:"render",value:function(){var e=this.props.comments;return!!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"comments-list"},this.getCreateCommentJSX(),this.getCommentsJSX(e)))}},{key:"getCreateCommentJSX",value:function(e){var t=this.props.updateComment;return r.a.createElement(x,{user:o.a.getAppData("loggedInUser"),editMode:!0,postComment:this.postComment,replyOnComment:e,updateComment:t})}},{key:"getCommentsJSX",value:function(e){var t=this,n=this.props,a=n.upvoteComment,o=n.updateComment;return r.a.createElement("div",{className:"comment-list-item"},e.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(x,{user:e.createdBy,comment:{id:e.id,text:e.comment,upvote:e.upvote,children:e.children},upvoteComment:a,updateComment:o}),e.showReplyBox&&t.getCreateCommentJSX(e),e.children&&t.getCommentsJSX(e.children))})))}},{key:"postComment",value:function(e,t){this.props.createComment({id:crypto.randomUUID(),comment:e,createdBy:t})}}]),n}(r.a.Component),D={INIT_COMMENTS:"INIT_COMMENTS",CREATE_COMMENT:"CREATE_COMMENT",UPVOTE_COMMENT:"UPVOTE_COMMENT",UPDATE_COMMENT:"UPDATE_COMMENT"},U=function(){return function(e){c.ajax(i.GET_COMMENTS,void 0,(function(t){e({type:D.INIT_COMMENTS,payload:{data:t}})}))}},R=Object(d.b)((function(e){return{comments:e.comments.comments}}),(function(e){return{loadComments:function(){e(U())},createComment:function(t){e(function(e){return{type:D.CREATE_COMMENT,comment:e}}(t))},upvoteComment:function(t){e(function(e){return{type:D.UPVOTE_COMMENT,comment:e}}(t))},updateComment:function(t){e(function(e){return{type:D.UPDATE_COMMENT,comment:e}}(t))}}}))(S),I=function(e){Object(b.a)(n,e);var t=Object(y.a)(n);function n(e){var a,o;return Object(v.a)(this,n),(a=t.call(this,e)).state={},a.source=a.props.source,a._handleKeyDown=a._handleKeyDown.bind(Object(O.a)(a)),a._handleClickEvents=a._handleClickEvents.bind(Object(O.a)(a)),a._handleWindowResize=a._handleWindowResize.bind(Object(O.a)(a)),document.addEventListener("keydown",a._handleKeyDown),document.addEventListener("click",a._handleClickEvents),window.addEventListener("resize",a._handleWindowResize),o=navigator.language||navigator.userLanguage,C.changeLanguage(o),a}return Object(E.a)(n,[{key:"componentDidMount",value:function(){this.props.initAppComp()}},{key:"render",value:function(){return r.a.createElement("div",{id:"flexiple-comments"},r.a.createElement(R,null))}},{key:"_handleKeyDown",value:function(e){e.keyCode}},{key:"_handleClickEvents",value:function(){}},{key:"_handleWindowResize",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this._handleKeyDown),document.removeEventListener("click",this._handleClickEvents),window.removeEventListener("resize",this._handleWindowResize)}}]),n}(r.a.Component),P="INIT_APP",A=Object(d.b)((function(e,t){return{appData:e.appData.appData}}),(function(e){return{initAppComp:function(){e({type:P})}}}))(I),L=n(51),J=n(91),B={},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(M.a)(Object(M.a)({},e),{},{appData:{showMask:!1}});default:return e}},X={},V=function e(t,n){var a=Object(j.a)(t);for(var o in a){var c=a[o];if(c.id===n.id){var i;a[o]=Object(M.a)(Object(M.a)({},c),{},{upvote:(null!==(i=c.upvote)&&void 0!==i?i:0)+1});break}c.children&&(a[o]=Object(M.a)(Object(M.a)({},c),{},{children:e(c.children,n)}))}return a},W=function e(t,n){var a=Object(j.a)(t);for(var o in a){var c=a[o];if(c.id===n.id){a[o]=n;break}c.children&&(a[o]=Object(M.a)(Object(M.a)({},c),{},{children:e(c.children,n)}))}return a},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.INIT_COMMENTS:return Object(M.a)(Object(M.a)({},e),{},{comments:t.payload.data});case D.CREATE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:[t.comment].concat(Object(j.a)(e.comments))});case D.UPVOTE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:V(e.comments,t.comment)});case D.UPDATE_COMMENT:return Object(M.a)(Object(M.a)({},e),{},{comments:W(e.comments,t.comment)});default:return e}},H=Object(L.b)({appData:z,comments:K}),F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.c,G=Object(L.d)(H,F(Object(L.a)(J.a)));!function(e){e}(G),o.a.setParamMap(),c.ajax("/data/AppConfig.json",void 0,(function(e){o.a.initConfig(e),function(e){if(e)for(var t in e)i[t]=e[t]}(e.URLs),l.a.render(r.a.createElement(d.a,{store:G},r.a.createElement(A,null)),document.getElementById("root"))}))},36:function(e,t,n){e.exports&&(e.exports=function(){var e,t={};return{getLoggedInUser:function(){return e&&e.userData},getParamData:function(e){return t[e]},setParamData:function(e){t=e},initConfig:function(t){e=t},getAppData:function(t){return e?e[t]:void 0},setAppData:function(t,n){e&&(e[t]=n)},getUserAction:function(t){return e&&e.actions?e.actions[t]:void 0},setUserAction:function(t,n){e.actions[t]=n},setParamMap:function(e){var n;e?t=e:""!==(n=-1!==window.location.href.indexOf("?")?window.location.href.slice(window.location.href.indexOf("?")+1,window.location.href.length):window.location.href.slice(window.location.href.indexOf("&")+1,window.location.href.length))&&n.split("&").forEach((function(e){var n=e.split("=");t[n[0]]=n[1]}))}}}())},81:function(e){e.exports=JSON.parse("{}")},82:function(e){e.exports=JSON.parse("{}")},83:function(e){e.exports=JSON.parse("{}")},84:function(e){e.exports=JSON.parse("{}")},85:function(e){e.exports=JSON.parse("{}")},95:function(e,t,n){e.exports=n(120)}},[[95,1,2]]]);
//# sourceMappingURL=main.9e5e9cb2.chunk.js.map